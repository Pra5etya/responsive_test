<!-- Sticky / fixed navbar -->
<header class="sticky top-0 bg-blue-600 text-white relative z-30">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a href="/" class="text-lg font-bold">MySite</a>
      </div>

      <!-- Menu (Desktop) - hanya muncul di layar >= sm -->
      <nav class="hidden sm:flex space-x-6">
        <a href="/" class="hover:text-gray-200">Home</a>
        <a href="/about" class="hover:text-gray-200">About</a>
        <a href="/services" class="hover:text-gray-200">Services</a>
        <a href="/contact" class="hover:text-gray-200">Contact</a>

        <!-- Role akses hanya muncul jika user = admin -->
        {% if role == "admin" %}
          <a href="/portfolio" class="hover:text-yellow-300 font-semibold">Admin</a>
        {% endif %}
      </nav>

      <!-- Tombol Mobile Menu (Burger Icon) -->
      <div class="sm:hidden">
        <button id="menu-btn" class="relative w-8 h-8 flex flex-col justify-center items-center group">
          <!-- Tiga garis burger -->
          <span class="bar w-6 h-0.5 bg-white mb-1 transition-all duration-300 ease-in-out"></span>
          <span class="bar w-6 h-0.5 bg-white mb-1 transition-all duration-300 ease-in-out"></span>
          <span class="bar w-6 h-0.5 bg-white transition-all duration-300 ease-in-out"></span>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu (Dropdown) -->
  <div id="mobile-menu"
    class="sm:hidden absolute left-0 right-0 bg-blue-600 px-4 pb-4 shadow-lg z-40
           max-h-0 overflow-hidden opacity-0 transform scale-y-95
           transition-all duration-300 ease-out">
    
    <!-- Link navigasi -->
    <a href="/" class="block py-2">Home</a>
    <a href="/about" class="block py-2">About</a>
    <a href="/services" class="block py-2">Services</a>
    <a href="/contact" class="block py-2">Contact</a>

    <!-- Link tambahan jika admin -->
    {% if role == "admin" %}
      <a href="/portfolio" class="block py-2 text-yellow-300 font-semibold">Admin</a>
    {% endif %}
  </div>
</header>

<!-- Overlay background hitam semi-transparan -->
<div id="overlay" class="hidden fixed inset-0 bg-black bg-opacity-40 z-20"></div>

<style>
  /* State saat mobile menu terbuka */
  #mobile-menu.open {
    max-height: 400px; /* tinggi maksimum menu agar bisa slide */
    opacity: 1;        /* tampil penuh */
    transform: scaleY(1); /* kembalikan ukuran normal */
  }

  /* Animasi burger jadi X */
  #menu-btn.open .bar:nth-child(1) {
    transform: rotate(45deg) translate(5px, 5px); /* garis atas miring */
  }
  #menu-btn.open .bar:nth-child(2) {
    opacity: 0; /* garis tengah hilang */
  }
  #menu-btn.open .bar:nth-child(3) {
    transform: rotate(-45deg) translate(5px, -5px); /* garis bawah miring lawan arah */
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const btn = document.getElementById("menu-btn");   // Tombol burger
    const menu = document.getElementById("mobile-menu"); // Dropdown mobile
    const overlay = document.getElementById("overlay"); // Overlay background

    // Fungsi menutup menu
    function closeMenu() {
      menu.classList.remove("open"); // hapus class open -> menu menutup
      btn.classList.remove("open");  // animasi burger kembali normal
      overlay.classList.add("hidden"); // overlay disembunyikan
    }

    // Fungsi membuka menu
    function openMenu() {
      menu.classList.add("open");    // tambahkan class open -> menu terbuka
      btn.classList.add("open");     // animasi burger berubah jadi X
      overlay.classList.remove("hidden"); // tampilkan overlay
    }

    // Event: klik tombol burger
    btn.addEventListener("click", () => {
      menu.classList.contains("open") ? closeMenu() : openMenu();
    });

    // Event: klik overlay menutup menu
    overlay.addEventListener("click", closeMenu);

    // Event: scroll halaman otomatis menutup menu
    window.addEventListener("scroll", closeMenu);
  });
</script>
